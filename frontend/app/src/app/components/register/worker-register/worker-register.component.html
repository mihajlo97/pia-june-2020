<h5>Worker registration</h5>
<form [formGroup]="regForm" (ngSubmit)="onSubmit()">
  <!--First name field-->
  <div class="form-group">
    <label for="first-name"
      ><span class="text-danger">* </span>First name:</label
    >
    <input
      type="text"
      class="form-control"
      [class.is-invalid]="isInvalidFirstName"
      [class.is-valid]="validFirstName"
      id="first-name"
      formControlName="firstName"
      maxlength="50"
      required
    />
    <small class="text-danger" *ngIf="isInvalidFirstName">
      This field is required for account registration.
    </small>
  </div>

  <!--Last name field-->
  <div class="form-group">
    <label for="last-name"><span class="text-danger">* </span>Last name:</label>
    <input
      type="text"
      class="form-control"
      [class.is-invalid]="isInvalidLastName"
      [class.is-valid]="validLastName"
      id="last-name"
      formControlName="lastName"
      maxlength="50"
      required
    />
    <small class="text-danger" *ngIf="isInvalidLastName">
      This field is required for account registration.
    </small>
  </div>

  <!--Username field-->
  <div class="form-group">
    <label for="username"><span class="text-danger">* </span>Username:</label>
    <input
      type="text"
      class="form-control"
      [class.is-invalid]="isInvalidUsername"
      [class.is-valid]="validUsername"
      id="username"
      formControlName="username"
      required
    />
    <small class="text-muted"
      >Username must be unique, at least 6 characters long and can only contain
      letters, numbers and underscores.</small
    >
    <br />
    <small class="text-danger" *ngIf="isInvalidUsername">
      Invalid username.
    </small>
  </div>

  <!--Password field-->
  <div class="form-group">
    <label for="password"><span class="text-danger">* </span>Password:</label>
    <input
      type="password"
      class="form-control"
      [class.is-invalid]="isInvalidPassword"
      [class.is-valid]="validPassword"
      id="password"
      formControlName="password"
      required
    />
    <small class="text-muted"
      >Password must be at least 7 characters long, must contain at least one
      uppercase letter, one number, one special character (#?!@$%^&*-) and must
      start with a letter.</small
    >
    <br />
    <small class="text-danger" *ngIf="isInvalidPassword">
      Password does not match the required format.
    </small>
  </div>

  <!--Birthdate fields-->
  <div class="form-group">
    <label for="birthdateD"
      ><span class="text-danger">* </span>Date of birth (DD/MM/YYYY):</label
    >
    <div class="d-flex flex-row">
      <input
        type="number"
        class="form-control"
        [class.is-invalid]="isInvalidBirthdateDay"
        [class.is-valid]="validBirthdateDay"
        style="width: 7rem;"
        id="birthdateD"
        formControlName="birthDateDay"
        min="1"
        max="31"
        required
      />
      <input
        type="number"
        class="form-control"
        style="width: 7rem; margin-left: 0.5rem;"
        [class.is-invalid]="isInvalidBirthdateMonth"
        [class.is-valid]="validBirthdateMonth"
        id="birthdateM"
        formControlName="birthDateMonth"
        min="1"
        max="12"
        required
      />
      <input
        type="number"
        class="form-control"
        style="width: 10rem; margin-left: 0.5rem;"
        [class.is-invalid]="isInvalidBirthdateYear"
        [class.is-valid]="validBirthdateYear"
        id="birthdateY"
        formControlName="birthDateYear"
        min="1900"
        [max]="currentYear"
        required
      />
    </div>
    <small
      class="text-danger"
      *ngIf="
        isInvalidBirthdateDay ||
        isInvalidBirthdateMonth ||
        isInvalidBirthdateYear
      "
    >
      Invalid date of birth.
    </small>
  </div>

  <!--Birthplace field-->
  <div class="form-group">
    <label for="birthplace"
      ><span class="text-danger">* </span>Birthplace:</label
    >
    <input
      type="text"
      class="form-control"
      [class.is-invalid]="isInvalidBirthplace"
      [class.is-valid]="validBirthplace"
      id="birthplace"
      formControlName="birthPlace"
      maxlength="100"
      required
    />
    <small class="text-danger" *ngIf="isInvalidBirthplace">
      This field is required for account registration.
    </small>
  </div>

  <!--Phone number field-->
  <div class="form-group">
    <label for="phone-number"
      ><span class="text-danger">* </span>Phone number:</label
    >
    <input
      type="text"
      class="form-control"
      [class.is-invalid]="isInvalidPhoneNumber"
      [class.is-valid]="validPhoneNumber"
      id="phone-number"
      formControlName="phoneNumber"
      placeholder="Ex: +381(0)651234567"
      required
    />
    <small class="text-danger" *ngIf="isInvalidPhoneNumber">
      Invalid phone number format or insufficient digits.
    </small>
  </div>

  <!--Email field-->
  <div class="form-group">
    <label for="email"><span class="text-danger">* </span>Email:</label>
    <input
      type="text"
      class="form-control"
      [class.is-invalid]="isInvalidEmail"
      [class.is-valid]="validEmail"
      id="email"
      formControlName="email"
      placeholder="Ex: person@company.com"
      maxlength="100"
      required
    />
    <small class="text-danger" *ngIf="isInvalidEmail">
      Invalid email address.
    </small>
  </div>

  <!--reCAPTCHA v2 prompt-->
  <div class="form-group">
    <label for="recaptcha"
      ><span class="text-danger">* </span>Verification:</label
    >
    <re-captcha
      (resolved)="resolveCaptcha($event)"
      formControlName="recaptcha"
      #recaptchaRef="reCaptcha"
    ></re-captcha>
    <small class="text-muted"
      >For security reasons, please fill the above reCAPTCHA to finish your
      account registration.</small
    >
    <br />
    <small class="text-danger" *ngIf="failedAuthRecaptcha">
      Failed to authenticate reCAPTCHA, please try again.
    </small>
  </div>

  <div class="form-group">
    <small class="text-muted"
      ><span class="text-danger">* </span>Marked fields are required for account
      registration.</small
    >
  </div>

  <!--Submit button-->
  <div style="text-align: center;">
    <button
      type="submit"
      class="btn btn-primary"
      style="width: 7rem;"
      [disabled]="regForm.invalid || regForm.pristine"
    >
      Register
    </button>
  </div>

  <!--Form submission results-->
  <div class="pt-3">
    <div
      class="alert alert-success fade show"
      role="alert"
      *ngIf="formSubmitSuccess && formSubmitted"
    >
      Registration request has been successfully submitted and is now pending
      administrator approval.
    </div>
    <div
      class="alert alert-danger fade show"
      role="alert"
      *ngIf="!formSubmitSuccess && formSubmitted"
    >
      Registration request has failed due to an internal server error, please
      try again later.
    </div>
  </div>
</form>
